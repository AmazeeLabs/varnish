<?php
// $Id:

/**
 * @file varnish.module
 * Provide drupal hooks for integration with the Varnish control layer.
 */

/**
 * Implementation of hook_menu()
 *
 * Set up admin settings callbacks, etc.
 */
function varnish_menu() {
  $items = array();
  $items['admin/settings/varnish'] = array(
    'title' => 'Varnish settings',
    'description' => 'Configure your varnish integration.',
    'page callback' => 'varnish_admin_settings_page',
    'access arguments' => array('administer varnish'),
    'file' => 'varnish.admin.inc',
  );
  $items['admin/reports/varnish'] = array(
    'title' => 'Varnish status',
    'description' => 'Configure your varnish integration.',
    'page callback' => 'varnish_admin_reports_page',
    'access arguments' => array('administer varnish'),
    'file' => 'varnish.admin.inc',
  );

  return $items;
}


/**
 * Implementation of hook_requirements()
 *
 * Insure that varnish's connection is good.
 */
function varnish_requirements($phase) {
  if ($phase == 'runtime') {
    // try a varnish admin connect, report results
  }
}